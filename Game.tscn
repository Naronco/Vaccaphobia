[gd_scene load_steps=27 format=2]

[ext_resource path="res://Player.gd" type="Script" id=1]
[ext_resource path="res://flur_unten.tscn" type="PackedScene" id=2]
[ext_resource path="res://concept-art/flur_oben.obj" type="ArrayMesh" id=3]
[ext_resource path="res://concept-art/milk_bottle.obj" type="ArrayMesh" id=4]
[ext_resource path="res://default_env.tres" type="Environment" id=5]
[ext_resource path="res://Interactable.gd" type="Script" id=6]
[ext_resource path="res://PuzzleScreen.gd" type="Script" id=7]
[ext_resource path="res://assets/slot.png" type="Texture" id=8]
[ext_resource path="res://assets/key.png" type="Texture" id=9]
[ext_resource path="res://concept-art/character_sheet.png" type="Texture" id=10]
[ext_resource path="res://scenes/Door.tscn" type="PackedScene" id=11]
[ext_resource path="res://Inventory.gd" type="Script" id=12]
[ext_resource path="res://eltern_raum.tscn" type="PackedScene" id=13]
[ext_resource path="res://kitchen_unten.tscn" type="PackedScene" id=14]
[ext_resource path="res://concept-art/outside.obj" type="ArrayMesh" id=15]
[ext_resource path="res://wohnzimmer_unten.tscn" type="PackedScene" id=16]
[ext_resource path="res://flur_oben_2.tscn" type="PackedScene" id=17]
[ext_resource path="res://kind_raum.tscn" type="PackedScene" id=18]
[ext_resource path="res://abstellraum.tscn" type="PackedScene" id=19]
[ext_resource path="res://wohnzimmer.tscn" type="PackedScene" id=20]

[sub_resource type="CapsuleShape" id=1]
radius = 0.3
height = 1.4

[sub_resource type="BoxShape" id=2]
extents = Vector3( 17.9118, 1, 13.604 )

[sub_resource type="CylinderShape" id=3]
radius = 0.696889
height = 2.52381

[sub_resource type="PlaneMesh" id=4]

[sub_resource type="SpatialMaterial" id=5]
albedo_color = Color( 1, 1, 1, 0.32549 )
roughness = 0.0
refraction_enabled = true
refraction_scale = 0.0
refraction_texture_channel = 0

[sub_resource type="SpatialMaterial" id=6]
roughness = 0.52
subsurf_scatter_enabled = true
subsurf_scatter_strength = 0.54

[node name="Spatial" type="Spatial"]

[node name="Player" type="KinematicBody" parent="."]
transform = Transform( 1, 0, 0, 0, 1, 0, 0, 0, 1, 2.1191, 0, -0.854094 )
script = ExtResource( 1 )
interactLabelPath = NodePath("../MarginContainer/CanvasLayer/InteractLabel")

[node name="Rotation" type="Spatial" parent="Player"]
transform = Transform( 0.0790333, 0, -0.996872, 0, 1, 0, 0.996872, 0, 0.0790333, 0, 0, 0 )

[node name="FlashLight" type="SpotLight" parent="Player/Rotation"]
transform = Transform( 1, 0, 0, 0, 0.707107, 0.707107, 0, -0.707107, 0.707107, 0, 1.3, 0 )
light_energy = 3.32
shadow_enabled = true
shadow_bias = -0.01
shadow_reverse_cull_face = true
spot_range = 17.6
spot_attenuation = 1.22295
spot_angle_attenuation = 0.293526

[node name="MeshInstance" type="MeshInstance" parent="Player/Rotation"]

[node name="CollisionShape" type="CollisionShape" parent="Player"]
transform = Transform( 1, 0, 0, 0, -4.37114e-08, 1, 0, -1, -4.37114e-08, 0, 1, 0 )
shape = SubResource( 1 )

[node name="OmniLight" type="OmniLight" parent="Player"]
transform = Transform( 1, 0, 0, 0, 1, 0, 0, 0, 1, 0, 0.6, 0 )
light_energy = 0.07
omni_range = 4.0
omni_attenuation = 4.92457

[node name="OmniLight2" type="OmniLight" parent="Player"]
transform = Transform( 1, 0, 0, 0, 1, 0, 0, 0, 1, 0, 1, 0 )
visible = false
shadow_enabled = true
omni_range = 1.5
omni_attenuation = 1e-05

[node name="Sprite3D" type="Sprite3D" parent="Player"]
transform = Transform( 0.707107, 0, 0.707107, 0, 1, 0, -0.707107, 0, 0.707107, 0, 1.05494, 0 )
pixel_size = 0.0033
texture = ExtResource( 10 )
region_enabled = true
region_rect = Rect2( 283, 0, 283, 640 )

[node name="Level" type="Spatial" parent="."]

[node name="Colliders" type="Spatial" parent="Level"]

[node name="Worldground" type="StaticBody" parent="Level/Colliders"]
transform = Transform( 1, 0, 0, 0, 1, 0, 0, 0, 1, 0, -1, 0 )

[node name="CollisionShape" type="CollisionShape" parent="Level/Colliders/Worldground"]
shape = SubResource( 2 )

[node name="Interactables" type="Spatial" parent="Level"]

[node name="FuseBox" type="Area" parent="Level/Interactables"]
transform = Transform( 1, 0, 0, 0, 1, 0, 0, 0, 1, -2.50567, 1.10488, -0.0818948 )
script = ExtResource( 6 )
puzzleScreenPath = NodePath("../../../MarginContainer/PuzzleLayer/PuzzleScreen")

[node name="CollisionShape" type="CollisionShape" parent="Level/Interactables/FuseBox"]
shape = SubResource( 3 )

[node name="Door" parent="Level/Interactables" instance=ExtResource( 11 )]

[node name="outside" type="Spatial" parent="Level"]
transform = Transform( -4.37114e-08, 0, 1, 0, 1, 0, -1, 0, -4.37114e-08, -8.9, 0.01, 8 )

[node name="outside" type="MeshInstance" parent="Level/outside"]
mesh = ExtResource( 15 )
material/0 = null
material/1 = null
material/2 = null
material/3 = null
material/4 = null
material/5 = null
material/6 = null
material/7 = null
material/8 = null
material/9 = null
material/10 = null
material/11 = null
material/12 = null
material/13 = null
material/14 = null
material/15 = null
material/16 = null
material/17 = null
material/18 = null
material/19 = null
material/20 = null

[node name="1og" type="Spatial" parent="Level"]

[node name="eltern_raum" parent="Level/1og" instance=ExtResource( 13 )]

[node name="flur_oben_2" parent="Level/1og" instance=ExtResource( 17 )]

[node name="kind_raum" parent="Level/1og" instance=ExtResource( 18 )]

[node name="abstellraum" parent="Level/1og" instance=ExtResource( 19 )]

[node name="wohnzimmer" parent="Level/1og" instance=ExtResource( 20 )]

[node name="flur_oben" type="Spatial" parent="Level/1og"]
transform = Transform( 1, 0, 0, 0, 1, 0, 0, 0, 1, -0.005, 2.51, -0.758 )

[node name="flur_oben" type="MeshInstance" parent="Level/1og/flur_oben"]
mesh = ExtResource( 3 )
material/0 = null
material/1 = null
material/2 = null
material/3 = null
material/4 = null
material/5 = null
material/6 = null
material/7 = null
material/8 = null
material/9 = null
material/10 = null
material/11 = null
material/12 = null
material/13 = null
material/14 = null
material/15 = null
material/16 = null
material/17 = null
material/18 = null
material/19 = null
material/20 = null
material/21 = null
material/22 = null

[node name="eg" type="Spatial" parent="Level"]

[node name="kitchen_unten" parent="Level/eg" instance=ExtResource( 14 )]

[node name="wohnzimmer_unten" parent="Level/eg" instance=ExtResource( 16 )]

[node name="flur_unten" parent="Level/eg" instance=ExtResource( 2 )]

[node name="MeshInstance" type="MeshInstance" parent="."]
transform = Transform( 10, 0, 0, 0, 10, 0, 0, 0, 10, 16.2798, 0, 0 )
mesh = SubResource( 4 )
material/0 = null

[node name="DirectionalLight" type="DirectionalLight" parent="."]
transform = Transform( 0.715729, 0.451952, 0.53242, -0.596855, -3.50718e-08, 0.802349, 0.362623, -0.892042, 0.26975, 0, 8.09447, 0 )
light_indirect_energy = 0.0
directional_shadow_mode = 0
directional_shadow_split_1 = 0.32
directional_shadow_split_2 = 0.308
directional_shadow_split_3 = 0.498
directional_shadow_bias_split_scale = 0.12

[node name="MeshInstance2" type="MeshInstance" parent="."]
transform = Transform( 1, 0, 0, 0, 1, 0, 0, 0, 1, -1.04111, 0.651772, 0.180237 )
visible = false
mesh = ExtResource( 4 )
material/0 = SubResource( 5 )
material/1 = SubResource( 6 )
material/2 = null

[node name="Camera" type="Camera" parent="."]
transform = Transform( 0.707107, -0.353553, 0.612372, 0, 0.866026, 0.5, -0.707107, -0.353553, 0.612372, 8.477, 10, 7.838 )
environment = ExtResource( 5 )
projection = 1
size = 5.0

[node name="MarginContainer" type="MarginContainer" parent="."]
margin_right = 40.0
margin_bottom = 40.0
__meta__ = {
"_edit_use_anchors_": false
}

[node name="CanvasLayer" type="CanvasLayer" parent="MarginContainer"]

[node name="Item" type="TextureRect" parent="MarginContainer/CanvasLayer"]
margin_right = 32.0
margin_bottom = 32.0
texture = ExtResource( 9 )
__meta__ = {
"_edit_use_anchors_": false
}

[node name="InteractLabel" type="Label" parent="MarginContainer/CanvasLayer"]
visible = false
anchor_left = 0.5
anchor_top = 0.888
anchor_right = 0.5
anchor_bottom = 0.888
margin_left = -100.0
margin_top = -15.0
margin_right = 100.0
margin_bottom = 15.6
text = "Press E to "
align = 1
valign = 1
__meta__ = {
"_edit_use_anchors_": false
}

[node name="Inventory" type="Control" parent="MarginContainer/CanvasLayer"]
anchor_bottom = 1.0
margin_right = 32.0
script = ExtResource( 12 )
__meta__ = {
"_edit_use_anchors_": false
}

[node name="Slot1" type="TextureRect" parent="MarginContainer/CanvasLayer/Inventory"]
margin_right = 32.0
margin_bottom = 32.0
texture = ExtResource( 8 )
__meta__ = {
"_edit_use_anchors_": false
}

[node name="Slot2" type="TextureRect" parent="MarginContainer/CanvasLayer/Inventory"]
margin_top = 32.0
margin_right = 32.0
margin_bottom = 32.0
texture = ExtResource( 8 )
__meta__ = {
"_edit_use_anchors_": false
}

[node name="Slot3" type="TextureRect" parent="MarginContainer/CanvasLayer/Inventory"]
margin_top = 64.0
margin_right = 32.0
margin_bottom = 32.0
texture = ExtResource( 8 )
__meta__ = {
"_edit_use_anchors_": false
}

[node name="Slot4" type="TextureRect" parent="MarginContainer/CanvasLayer/Inventory"]
margin_top = 96.0
margin_right = 32.0
margin_bottom = 32.0
texture = ExtResource( 8 )
__meta__ = {
"_edit_use_anchors_": false
}

[node name="Slot5" type="TextureRect" parent="MarginContainer/CanvasLayer/Inventory"]
margin_top = 128.0
margin_right = 32.0
margin_bottom = 32.0
texture = ExtResource( 8 )
__meta__ = {
"_edit_use_anchors_": false
}

[node name="Slot6" type="TextureRect" parent="MarginContainer/CanvasLayer/Inventory"]
margin_top = 160.0
margin_right = 32.0
margin_bottom = 32.0
texture = ExtResource( 8 )
__meta__ = {
"_edit_use_anchors_": false
}

[node name="PuzzleLayer" type="CanvasLayer" parent="MarginContainer"]

[node name="PuzzleScreen" type="Control" parent="MarginContainer/PuzzleLayer"]
visible = false
anchor_right = 1.0
anchor_bottom = 1.0
script = ExtResource( 7 )
__meta__ = {
"_edit_use_anchors_": false
}
playerPath = NodePath("../../../Player")

[node name="Popup" type="TextureRect" parent="MarginContainer/PuzzleLayer/PuzzleScreen"]
anchor_right = 1.0
anchor_bottom = 1.0
__meta__ = {
"_edit_use_anchors_": false
}

[node name="InteractLabel2" type="Label" parent="MarginContainer/PuzzleLayer/PuzzleScreen"]
anchor_left = 0.5
anchor_right = 0.5
margin_left = -100.0
margin_top = 3.46
margin_right = 100.0
margin_bottom = 34.06
text = "Puzzle"
align = 1
valign = 1
__meta__ = {
"_edit_use_anchors_": false
}

[connection signal="body_entered" from="Level/Interactables/FuseBox" to="Level/Interactables/FuseBox" method="_on_Area_body_entered"]
[connection signal="body_exited" from="Level/Interactables/FuseBox" to="Level/Interactables/FuseBox" method="_on_Area_body_exited"]
[connection signal="gui_input" from="MarginContainer/CanvasLayer/Inventory" to="MarginContainer/CanvasLayer/Inventory" method="_on_Inventory_gui_input"]
